<%- include('header',user) %>
<script src="/js/camera_utils.js"></script>
 <!-- Require the peer dependencies of pose-detection. -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>

<!-- You must explicitly require a TF.js backend if you're not using the TF.js union bundle. -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
<!-- Alternatively you can use the WASM backend: <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm/dist/tf-backend-wasm.js"></script> -->

<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection"></script>
<script src="/js/ARWorkout.js"></script>

<style>
  #user-video{
    width: 100%;
    height: 100%;
    max-height: 100vh;
  }
  .ARWorkoutContainer{
    margin: auto;
    display: table;
    position: relative;
  }
  #user-canvas{
    position: absolute;
    top:0;
    left: 0;
    width: 100%;
    height: 100%;
  }
</style>
<div class="ARWorkoutContainer">

    <video id="user-video"></video>
    <canvas id="user-canvas"></canvas>


</div>


<script>

navigator.mediaDevices
  .getUserMedia({
                video: {
                    width: {ideal: 640},
                    height: {ideal: 480}
                },
                audio: false,
            })
  .then((stream) => {
    var video=$('#user-video').get(0)
    video.srcObject = stream;
    video.onloadedmetadata = function(e) {
      video.play();

    };

  })
    

</script>
<%- include('footer') %>

